<% if current_user&.is_admin? %>
    <%= button_to 'Add a new event'.html_safe, new_event_path, :method => :get %></div>
<% end %>

<h4>Upcoming events</h4>
<table>
  <% @future_events.each do |event| %>
    <tr>
      <td>
        <h5><%= event.title %></h5>
        <p><%= event.date.strftime('%B %d, %Y') %></p>
        <p><%= pluralize(event.spots_remaining, "spot") %> remaining</p>
        <%= link_to 'Show', event_path(event) %>
        <% if current_user&.is_admin? %>
          <%= link_to 'Edit', edit_event_path(event) %>
          <%= link_to 'Delete', event_path(event),
          method: :delete,
          data: { confirm: 'Are you sure?' } %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>

<h4>Past events</h4>
<table>
  <% @past_events.each do |event| %>
    <tr>
      <td>
        <h5><%= event.title %></h5>
        <p><%= event.date.strftime('%B %d, %Y') %></p>

        <%= link_to 'Show', event_path(event) %>
        <% if current_user&.is_admin? %>
          <%= link_to 'Edit', edit_event_path(event) %>
          <%= link_to 'Delete', event_path(event),
          method: :delete,
          data: { confirm: 'Are you sure?' } %>
        <% end %>
      </td>
    </tr>
  <% end %>
</table>
